<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no">
<title>trigger : Javascript</title>
<link href="https://fonts.googleapis.com/css?family=Nanum+Gothic&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../css/blog-sass.css">
</head>
<body>
<div id="wrap">
    <h1 class="main__title">알아두면 쓸모있는 자바스크립트<br> Part.1 - trigger</h1>
    <p class="main__text">삼성 스크립트 업무를 진행하면서 많이 사용되고 유용하게 사용되는 개념들이지만 왜 쓰는지? 어떤 경우에 사용되는지? 잘 몰랐던 개념들을 몇가지 선정하여 정리해보았습니다.</p>

    <section class="section__wrap">
        <div class="quote">
            <p class="notice__text">알아두면 쓸모있는 자바스크립트 블로깅은 아래 순서대로 공유 예정입니다.</p>
            <ul class="list text_type">
            <li><strong><a href="http://staging.hivelab.co.kr/aemui1/javascript/blog/workspace/dist/html/02_trigger.html">1. trigger</a></strong></li>
            <li class="point5">2. Custom Event</li>
            <li class="point5">3. 즉시 실행 함수</li>
            <li class="point5">4. Event Delegation</li>
            </ul>
        </div>
    </section>
    <section class="section__wrap">
        <h2 class="sub__title">trigger</h2>
        <p class="sub__text"><span class="code">trigger()</span>는 지정된 이벤트나 선택한 요소에 바인딩된 이벤트를 실행시키는 jQuery 메소드입니다.</p>
        <div class="example_area">
            <code>
                $('selector').trigger(eventType [, extraParameters]);
            </code>
        </div>
        <p class="sub__text">이벤트가 바인딩된 요소에 trigger 메소드를 사용하여 이벤트를 발생시킵니다.</p>
        <div class="example_area">
            <code>
                <span class="comment">// #btn 요소에 'click' 이벤트를 바인딩하여 이벤트 핸들러 등록.</span><br>
                $('#btn').on('<strong class="point">click</strong>', function () {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;console.log('click');<br>
                });<br>
                <span class="comment">// #btn 요소에 바인딩 된 'click' 이벤트를 실행시킨다.</span><br>
                $('#btn').<strong class="point">trigger('click')</strong>;<br>
                <br>
                <span class="comment">// #inputTest 요소에 'focus' 이벤트를 바인딩하여 이벤트 핸들러 등록.</span><br>
                $('#inputTest').<strong class="point">focus</strong>(function () {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;console.log('focus');<br>
                });<br>
                <span class="comment">// #inputTest 요소에 바인딩 된 'focus' 이벤트를 실행시킨다.</span><br>
                $('#inputTest').<strong class="point">trigger('focus')</strong>;
            </code>
        </div>
        <p class="sub__text"><span class="code">trigger()</span>가 어떻게 작동하는지 아래 예제에서 간단하게 확인할 수 있습니다.</p>
        <div class="example__wrap">
            <strong class="title">* Example</strong>
            <p class="text">각각의 버튼 클릭 시 해당하는 버튼의 카운트 수가 올라가지만, 'button02' 클릭 시 'button01' 클릭 이벤트도 함께 실행되어 카운트 수가 같이 올라가도록 trigger 메소드를 사용하여 적용하였습니다.</p>
            <div class="img__wrap type2">
                <div class="img__area">
                    <div class="img">
                        <img src="../img/trigger/trigger_example01-01.gif" alt="" style="width: auto">
                    </div>
                </div>
            </div>
            <div class="btn__area">
                <a href="./code/02_trigger01-01.html" target="_blank" class="btn_view">Example Code</a>
            </div>
        </div>
        
        <div class="notice type2">
            <h3 class="notice__title">NOTICE</h3>
            <p class="notice__text">미리 알아두면 좀 더 이해하기 쉬운 개념 목록입니다.</p>
            <ul class="list">
            <li>
                <strong class="list__title">이벤트 (Event)</strong>
                <p class="list__text">브라우저 내 특정 대상에게 일어나는 모든 동작, 행위를 말합니다.</p>
            </li>
            <li>
                <strong class="list__title">이벤트 핸들러 (Event Handler)</strong>
                <p class="list__text">이벤트가 발생했을 때 처리를 담당하는 실행 함수를 의미하며, 이벤트 핸들러가 연결된 요소에 이벤트가 발생하면, 웹 브라우저는 연결된 이벤트 핸들러를 실행합니다.</p>
            </li>
            <li>
                <strong class="list__title">이벤트 리스너 (Event Listener)</strong>
                <p class="list__text">해당 이벤트가 발생했을 때 등록했던 이벤트 리스너가 실행됩니다.<br> (이벤트 리스너는 항상 on + '이벤트' 명으로 명명됩니다.)</p>
            </li>
            </ul>
            <strong class="title">* Example</strong>
            <p class="text">대표적으로 아래와 같은 코드를 예로 들 수 있습니다. window의 이벤트(load)가 발생되었을 때 등록해둔 이벤트 리스너(onload)가 실행되고, 발생한 이벤트를 이벤트 핸들러(function)가 처리하게 되는 것 입니다.</p>
            <div class="table_wrap table_type2">
                <table>
                <thead>
                <tr>
                <th scope="col"><div class="th">이벤트</div></th>
                <th scope="col"><div class="th">이벤트 리스너</div></th>
                <th scope="col"><div class="th">이벤트 핸들러</div></th>
                </tr>
                <tbody>
                <tr>
                <td><div class="td">load</div></td>
                <td><div class="td">onload</div></td>
                <td><div class="td">function () {}</div></td>
                </tr>
                </tbody>
                </thead>
                </table>
            </div>
            <div class="example_area">
                <code>
                    <span class="comment">// Javascript</span><br>
                    window.onload = function () {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log('load');<br>
                    }<br>
                    <span class="comment">// jQuery</span><br>
                    $(window).on('load', function () {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;console.log('load');<br>
                    });
                </code>
            </div>
        </div>

        <article class="article__wrap">
            <h3 class="article__title">[How to use]</h3>
            <div class="box">
                <h4 class="box__title">다중 인자 값</h4>
                <p class="box__text">배열 및 객체로 인자 값을 전달할 수 있으며, 전달한 인자 값을 이벤트 핸들러에서 매개변수 값으로 받아 올 수 있습니다.<br> 이벤트 핸들러에서 인자 값을 받아 올 경우 첫 번째 매개변수 값은 eventType이며, 두 번째 매개변수 값부터 인자 값을 받아 올 수 있습니다.</p>
                <ul class="list">
                <li>
                    <strong class="list__title">배열로 인자 값을 넘겨줄 경우</strong>
                    <p class="list__text">trigger에서 배열로 넘겨준 인자 값을 매개변수로 받아 올 수 있습니다.</p>
                    <div class="example_area">
                        <code>
                            $('#test').on('wishList', function (param1, param2) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 첫 번째 매개변수 값은 eventType 입니다.</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;console.log(param1); <span class="comment">// eventType</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;console.log(param2); <span class="comment">// '모니터'</span><br>
                            });<br>
                            $('#test').trigger('wishList', <strong class="point">['모니터', '의자', '데스크탑']</strong>);
                        </code>
                    </div>
                    <div class="img">
                        <img src="../img/trigger/trigger_example02.png" alt="">
                    </div>
                </li>
                <li>
                    <strong class="list__title">객체로 인자 값을 넘겨줄 경우</strong>
                    <p class="list__text">매개변수 와 함께 해당 객체의 키값으로 접근해야 정상적으로 인자 값을 받아 올 수 있습니다.</p>
                    <div class="example_area">
                        <code>
                            $('#test').on('shoppingList', function (param1, param2) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 첫 번째 매개변수 값은 eventType 입니다.</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;console.log(param1); <span class="comment">// eventType</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;console.log(param2); <span class="comment">// {item1: "모니터", item2: "의자"}</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 매개변수 + 키값으로 접근</span><br>
                            &nbsp;&nbsp;&nbsp;&nbsp;console.log(param2.item2); <span class="comment">// '의자'</span><br>
                            });<br>
                            $('#test').trigger('shoppingList', <strong class="point">{<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;item1 : '모니터',<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;item2 : '의자'<br>
                            }</strong>);
                        </code>
                    </div>
                    <div class="img">
                        <img src="../img/trigger/trigger_example03.png" alt="">
                    </div>
                </li>
                </ul>

                <h4 class="box__title">이벤트 네임스페이스</h4>
                <p class="box__text">네임스페이스를 사용한 이벤트에도 trigger 적용이 가능합니다.</p>
                <div class="example_area">
                    <code>
                        $('#test').on('<strong class="point">wishList.monitor</strong>', function () {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log('모니터'); <span class="comment">// 모니터</span><br>
                        });<br>
                        $('#test').on('<strong class="point">wishList.chair</strong>', function () {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;console.log('의자'); <span class="comment">// 의자</span><br>
                        });<br>
                        $('#test').trigger('<strong class="point">wishList.monitor</strong>');<br>
                        $('#test').trigger('<strong class="point">wishList.chair</strong>');
                    </code>
                </div>

                <div class="notice type2">
                    <h3 class="notice__title">이벤트 네임스페이스 (Event Namespace)란?</h3>
                    <p class="notice__text">동일한 요소에 같은 이벤트를 동일하게 사용하여 처리할 경우 jQuery에서는 이벤트를 네임스페이스로 구분하여 사용 할 수 있습니다. 네임스페이스는 {이벤트 이름}.{namespace} 형식으로 사용 가능하며, 여러 개의 네임스페이스 지정이 가능합니다.</p>
                    <div class="example_area">
                        <code>
                            <span class="comment">// 아래 코드에서는 'click'이 이벤트 이름에 해당하고, 'wishlist'가 namespace에 해당하게 됩니다.</span><br>
                            $('selector').on('<strong class="point">click.wishlist</strong>', function () {...});
                        </code>
                    </div>
                    <p class="notice__text">그리고 네임스페이스는 이벤트 이름 뒤에 붙인 문자열을 기준으로 구분합니다. 여러개의 네임스페이스를 추가해도 이벤트 이름 뒤 첫번째 마침표를 기준으로 하나의 네임스페이스로 인식합니다.</p>
                    <div class="example_area">
                        <code>
                            <span class="comment">// .wishlist.buy는 하나의 네임스페이스가 됩니다.</span><br>
                            $('selector').on('<strong class="point">click.wishlist</strong>', function () {...});<br>
                            $('selector').on('<strong class="point">click.wishlist.buy</strong>', function () {...});
                        </code>
                    </div>
                    <p class="notice__text">네임스페이스를 사용하면서 생기는 이슈들은 이 후에 블로깅 될 custom event에서 좀 더 자세하게 다뤄보겠습니다.</p>
                </div>
            </div>
        </article>

        <article class="article__wrap">
            <h3 class="article__title">[Why use it]</h3>
            <p class="article__text">trigger는 커스텀 이벤트를 호출할 수 있다는 장점이 있습니다.<br> 한가지 예를 들자면, <strong>이벤트가 걸려있는 요소 데이터가 동적으로 추가될 경우</strong> 해당 요소에 걸려있는 이벤트를 재호출하여 <strong>레이아웃을 다시 그려줘야 할 경우</strong>가 있습니다. 이런 경우를 대응하기 위해 'rerun'이라는 커스텀 이벤트를 만들고, 데이터가 동적으로 추가될 때 rerun 이벤트를 trigger로 호출하여 사용합니다.</p>
            <p class="article__text">아래 예제에서 동적으로 요소를 추가하였을 때, trigger를 사용하여 레이아웃을 다시 그려주는 것을 확인할 수 있습니다.</p>
            <div class="example__wrap">
                <strong class="title">* Example</strong>
                <p class="text">'행'별로 가장 높은 높이 값을 기준으로 높이 값을 적용해준 레이아웃에 동적으로 요소를 추가할 경우 추가된 요소의 높이 값은 맞지 않게됩니다. 이때 Height Match 버튼을 눌러주면 버튼에 걸려있는 trigger가 동작하면서 rerun 이벤트를 실행하게 되고 높이 값을 다시 맞춰주게 됩니다.</p>
                <div class="img__wrap type2">
                    <div class="img__area">
                        <div class="img">
                            <img src="../img/trigger/trigger_example01-02.gif" alt="" style="width: auto">
                        </div>
                    </div>
                </div>
                <div class="btn__area">
                    <a href="./code/02_trigger01-02.html" target="_blank" class="btn_view">Example Code</a>
                </div>
            </div>

            <div class="notice type2">
                <h3 class="notice__title">trigger() 와 triggerHandler() 차이점</h3>
                <ul class="list text_type">
                <li>triggerHandler() 메소드는 이벤트 버블링이 발생하지 않습니다.</li>
                <li>triggerHandler() 메소드는 일치하는 요소 중 첫번째 요소에서만 동작합니다.</li>
                <li>triggerHandler() 메소드는 이벤트 핸들러만 실행시키고 이벤트의 기본 기능은 실행하지 않습니다. (ex: form 전송)</li>
                <li>triggerHandler() 메소드는 jQuery 객체를 반환하지 않고, 실행된 마지막 이벤트 핸들러의 리턴값을 반환합니다.</li>
                </ul>
                <div class="img__wrap type2">
                    <div class="img__area">
                        <div class="img">
                            <img src="../img/trigger/trigger_example01-03.gif" alt="" style="width: auto">
                        </div>
                    </div>
                </div>
                <p class="notice__text">tirgger 버튼을 클릭하였을 때 이벤트 버블링이 발생하여 모든 input에 배경색이 지정되고 마지막 요소에 focus 이동이 되지만, triggerHandler 버튼의 경우 일치하는 요소 중 첫 번째 요소에만 배경색이 지정되고 input의 이벤트 기본 기능인 focus 기능은 작동하지 않습니다.</p>
                <div class="btn__area">
                    <a href="./code/02_trigger01-03.html" target="_blank" class="btn_view">Example Code</a>
                </div>
            </div>
        </article>

        <article class="article__wrap">
            <h3 class="article__title">[Trouble Shooting]</h3>
            <p class="article__text">trigger 메소드는 <strong>요소에 등록된 이벤트 핸들러만 실행</strong>시킵니다. 실제 이벤트가 일어나는 것은 아니기 때문에 a태그에 클릭 이벤트를 실행시켜도 href 링크로 이동하지는 않습니다.</p>
            <div class="box">
                <h4 class="box__title">Issue</h4>
                <p class="article__text">버튼 클릭 시 a태그에 클릭 트리거를 적용하였지만, 링크 이동은 되지 않으며 이벤트 핸들러만 실행되어 alert 문구만 노출됩니다.</p>
                <div class="example_area">
                    <code>
                        ...<br>
                        bindEvents : function () {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;this.btn.on('click', $.proxy(this.clickFunc, this));<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;this.link.on('click', $.proxy(this.linkClickFunc, this));<br>
                        },<br>
                        clickFunc : function () {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// link trigger</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<strong class="point">this.link.trigger('click');</strong><br>
                        },<br>
                        linkClickFunc : function () {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;alert('Link Click!');<br>
                        },<br>
                        ...
                    </code>
                </div>
                <div class="img">
                    <img src="../img/trigger/trigger_example04_asis.gif" alt="" style="width: auto">
                </div>
                <div class="btn__area">
                    <a href="./code/02_trigger02_asis.html" target="_blank" class="btn_view">Example Code</a>
                </div>
                
                <h4 class="box__title">Trouble Shooting</h4>
                <p class="box__text">DOM Elements에 접근한 후, HTMLElement.click()을 이용하여 마우스 클릭 이벤트를 발생시키는 방법으로 3가지를 예로 들 수 있습니다.</p>
                <ul class="list">
                <li>
                    <strong class="list__title">jQuery 객체에서 배열로 접근</strong>
                    <p class="list__text">jQuery 객체에 [0]를 추가하여 DOM 요소에 접근한 후, click 이벤트를 적용해줍니다.</p>
                    <div class="example_area">
                        <code>
                            clickFunc : function () {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<strong class="point">this.link[0].click();</strong><br>
                            },
                        </code>
                    </div>
                </li>
                <li>
                    <strong class="list__title">jQuery .get() 메소드 사용</strong>
                    <p class="list__text">get(0) 값을 사용하여 해당 a태그의 DOM 요소를 반환 받아 click 이벤트를 적용해줍니다.</p>
                    <div class="example_area">
                        <code>
                            clickFunc : function () {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<strong class="point">this.link.get(0).click();</strong><br>
                            },
                        </code>
                    </div>
                </li>
                <li>
                    <strong class="list__title">Javascript DOM 요소 접근</strong>
                    <p class="list__text">DOM 요소에 접근하여 click 이벤트를 적용해줍니다.</p>
                    <div class="example_area">
                        <code>
                            clickFunc : function () {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;<strong class="point">document.querySelector('.link').click();</strong><br>
                            },
                        </code>
                    </div>
                </li>
                </ul>
                <div class="img">
                    <img src="../img/trigger/trigger_example04_tobe.gif" alt="" style="width: auto">
                </div>
                <div class="btn__area">
                    <a href="./code/02_trigger02_tobe.html" target="_blank" class="btn_view">Example Code</a>
                </div>            
            </div>

        </article>
    </section>
    <section class="section__wrap">
        <h2 class="sub__title">마치며</h2>
        <p class="sub__text">그동안 업무에서 많이 사용하면서도 정확하게 왜 트리거를 사용하는지는 모른 채로 그냥 사용해 왔었는데요. 이번 공부를 통하여 trigger는 왜 사용하는지, 실무에는 어떻게 활용하면 좋은지에 대하여 좀 더 깊게 알게 되었습니다.</p>
        <p class="sub__text">그리고 trigger 말고도 그 외 부가적인 개념들, 그러니까 예를 들면 인자와 매개변수의 차이, 네임스페이스란 무엇인지, 이벤트 핸들러와 이벤트 리스너란 정확히 무슨 뜻인지, 그냥 막연하게 알고만 있던 것에 대하여 조금이나마 개념을 알게 된 시간이었습니다.</p>
        <p class="sub__text"></p>
    </section>
    <section class="section__wrap">
        <h2 class="sub__title">참고 사이트</h2>
        <ul class="list text_type">
        <li><a href="https://api.jquery.com/trigger/">https://api.jquery.com/trigger/</a></li>
        <li><a href="https://d2.naver.com/helloworld/1855209">https://d2.naver.com/helloworld/1855209</a></li>
        <li><a href="https://developer.mozilla.org/ko/docs/Web/Guide/Events/Creating_and_triggering_events">https://developer.mozilla.org/ko/docs/Web/Guide/Events/Creating_and_triggering_events</a></li>
        <li><a href="https://codedragon.tistory.com/5743">https://codedragon.tistory.com/5743</a></li>
        <li><a href="https://stackoverflow.com/questions/3772537/triggerhandler-vs-trigger-in-jquery">https://stackoverflow.com/questions/3772537/triggerhandler-vs-trigger-in-jquery</a></li>
        </ul>
    </section>
</div>
</body>
</html>