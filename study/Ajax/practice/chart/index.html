<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title>Chart</title>
<style>
#container {
	min-width: 310px;
	max-width: 800px;
	height: 400px;
	margin: 0 auto
}
</style>
<script src="js/lib/jquery-1.12.4.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>
	<div id="container"></div>

	<script>
		var chart = Highcharts.chart('container', {

			title: {
				text: 'Solar Employment Growth by Sector, 2010-2016'
			},

			subtitle: {
				text: 'Source: thesolarfoundation.com'
			},

			yAxis: {
				title: {
					text: 'Number of Employees'
				}
			},
			legend: {
				layout: 'vertical',
				align: 'right',
				verticalAlign: 'middle'
			},

			responsive: {
				rules: [{
					condition: {
							maxWidth: 500
					},
					chartOptions: {
							legend: {
								layout: 'horizontal',
								align: 'center',
								verticalAlign: 'bottom'
							}
					}
				}]
			}

		});

    var addData = function (nameTitle) {
      chart.xAxis[0].setCategories(year);

      chart.addSeries({
        name : nameTitle,
        data : deposit
      });
    }

		var deposit = [],
			  year = [],
			  yeartemp = [],
        dataName = ['전세 실거래가','전세 추이'],
			  jsonData = ['sampleData_rental_real','sampleData_rental_trend'];
			 

		var chartData = function (src) {
			$.ajax({
				url: "./json/"+ src +".json",
				success: function (res) {
					// console.log(res);

					$.map(res, function (value, key) {
						// console.log(key, value);

						$.map(value, function (value2, key2) {
							// console.log(key2, value2);

							if (key2 === 'deposit') {
								// console.log(key2, value2);
								deposit.push(value2);
                // console.log(deposit);
							}
							if (key2 === 'year') {
								// console.log(key2, value2);
								if (src === jsonData[0]) {
									yeartemp.push(value2);
									// console.log(year[year.length-2]);
									// console.log(value2);

									if (yeartemp[yeartemp.length-2] === value2) {
										year.push('')
									} else {
										year.push(value2);
									}
									
								}

                // if (year[year.length-2] === value2) {
								// 	year.push('');
								// } else {
								// 	year.push(value2);
								// }

							}
						});
					});

					// console.log(src);
				
					// if문 말고 switch문을 사용한 이유?
					if (src === jsonData[0]) {
						addData(dataName[0]);
						deposit = [];
					}
					if (src === jsonData[1]) {
						addData(dataName[1]);
						deposit = [];
					}


          // switch (src) {
          //   case 'sampleData_rental_real' :
          //         addData(dataName[0]);
          //         deposit = [];
          //         break;
          //   case 'sampleData_rental_trend' :
          //         addData(dataName[1]);
          //         deposit = [];
          //         break;
          // }

				}
			});
		}
		// for문을 사용하는것과 for in문을 사용하는것의 차이?
		// 왜 for in문을 사용하셨는지?
    for (var i = 0 ; i < jsonData.length ; i++) {
      chartData(jsonData[i]);
    }

    // for (var i in jsonData) {
    //   chartData(jsonData[i])
    // }
	</script>
</body>
</html>